fragment dimensionMetadata on Dimension {
  iri
  label
  description
  isNumerical
  isKeyDimension
  dataType
  scaleType
  order
  values(
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    filters: $filters
    disableLoad: $disableValuesLoad
  )
  unit
  related {
    iri
    type
  }
  ... on TemporalDimension {
    timeUnit
    timeFormat
  }
  ... on NumericalMeasure {
    isCurrency
    currencyExponent
    resolution
    isDecimal
  }
}

fragment dimensionMetadataWithHierarchies on Dimension {
  iri
  label
  description
  isNumerical
  isKeyDimension
  scaleType
  dataType
  order
  values(sourceType: $sourceType, sourceUrl: $sourceUrl, filters: $filters)
  unit
  related {
    iri
    type
  }
  ... on TemporalDimension {
    timeUnit
    timeFormat
  }
  ... on NumericalMeasure {
    isCurrency
    currencyExponent
    resolution
    isDecimal
  }
  ...hierarchyMetadata
}

fragment hierarchyMetadata on Dimension {
  hierarchy(sourceType: $sourceType, sourceUrl: $sourceUrl) {
    ...hierarchyValueFields
    children {
      ...hierarchyValueFields
      children {
        ...hierarchyValueFields
        children {
          ...hierarchyValueFields
          children {
            ...hierarchyValueFields
            children {
              ...hierarchyValueFields
            }
          }
        }
      }
    }
  }
}

query SearchCubes(
  $sourceType: String!
  $sourceUrl: String!
  $locale: String!
  $query: String
  $order: SearchCubeResultOrder
  $includeDrafts: Boolean
  $filters: [SearchCubeFilter!]
) {
  searchCubes(
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    locale: $locale
    query: $query
    order: $order
    includeDrafts: $includeDrafts
    filters: $filters
  ) {
    highlightedTitle
    highlightedDescription
    cube
  }
}

query DataCubePreview(
  $iri: String!
  $sourceType: String!
  $sourceUrl: String!
  $locale: String!
  $latest: Boolean
  $filters: Filters
  $disableValuesLoad: Boolean = true
) {
  dataCubeByIri(
    iri: $iri
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    locale: $locale
    latest: $latest
    disableValuesLoad: $disableValuesLoad
  ) {
    iri
    title
    description
    publicationStatus
    dimensions(
      sourceType: $sourceType
      sourceUrl: $sourceUrl
      disableValuesLoad: $disableValuesLoad
    ) {
      ...dimensionMetadata
    }
    measures(
      sourceType: $sourceType
      sourceUrl: $sourceUrl
      disableValuesLoad: $disableValuesLoad
    ) {
      ...dimensionMetadata
    }
    observations(sourceType: $sourceType, sourceUrl: $sourceUrl, limit: 10) {
      data
      sparql
      sparqlEditorUrl
    }
  }
}

query DataCubeMetadata(
  $iri: String!
  $sourceType: String!
  $sourceUrl: String!
  $locale: String!
  $latest: Boolean
) {
  dataCubeByIri(
    iri: $iri
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    locale: $locale
    latest: $latest
  ) {
    iri
    identifier
    title
    description
    publisher
    version
    workExamples
    contactName
    contactEmail
    landingPage
    expires
    datePublished
    dateModified
    publicationStatus
    themes {
      iri
      label
    }
    creator {
      iri
      label
    }
  }
}

query Components(
  $iri: String!
  $sourceType: String!
  $sourceUrl: String!
  $locale: String!
  $latest: Boolean
  $filters: Filters
  $componentIris: [String!]
  $disableValuesLoad: Boolean = false
) {
  dataCubeByIri(
    iri: $iri
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    locale: $locale
    latest: $latest
    disableValuesLoad: $disableValuesLoad
  ) {
    dimensions(
      sourceType: $sourceType
      sourceUrl: $sourceUrl
      componentIris: $componentIris
      disableValuesLoad: $disableValuesLoad
    ) {
      ...dimensionMetadata
    }
    measures(
      sourceType: $sourceType
      sourceUrl: $sourceUrl
      componentIris: $componentIris
      disableValuesLoad: $disableValuesLoad
    ) {
      ...dimensionMetadata
    }
  }
}

query ComponentsWithHierarchies(
  $iri: String!
  $sourceType: String!
  $sourceUrl: String!
  $locale: String!
  $latest: Boolean
  $filters: Filters
  $componentIris: [String!]
) {
  dataCubeByIri(
    iri: $iri
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    locale: $locale
    latest: $latest
  ) {
    dimensions(
      sourceType: $sourceType
      sourceUrl: $sourceUrl
      componentIris: $componentIris
    ) {
      ...dimensionMetadataWithHierarchies
    }
    measures(
      sourceType: $sourceType
      sourceUrl: $sourceUrl
      componentIris: $componentIris
    ) {
      ...dimensionMetadataWithHierarchies
    }
  }
}

query DimensionValues(
  $dataCubeIri: String!
  $dimensionIri: String!
  $sourceType: String!
  $sourceUrl: String!
  $locale: String!
  $latest: Boolean
  $filters: Filters
) {
  dataCubeByIri(
    iri: $dataCubeIri
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    locale: $locale
    latest: $latest
  ) {
    dimensionByIri(
      iri: $dimensionIri
      sourceType: $sourceType
      sourceUrl: $sourceUrl
    ) {
      ...dimensionMetadataWithHierarchies
    }
  }
}

query GeoCoordinatesByDimensionIri(
  $dataCubeIri: String!
  $dimensionIri: String!
  $sourceType: String!
  $sourceUrl: String!
  $locale: String!
  $latest: Boolean
) {
  dataCubeByIri(
    iri: $dataCubeIri
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    locale: $locale
    latest: $latest
  ) {
    dimensionByIri(
      iri: $dimensionIri
      sourceType: $sourceType
      sourceUrl: $sourceUrl
    ) {
      ... on GeoCoordinatesDimension {
        geoCoordinates {
          iri
          label
          latitude
          longitude
        }
      }
    }
  }
}

query GeoShapesByDimensionIri(
  $dataCubeIri: String!
  $dimensionIri: String!
  $sourceType: String!
  $sourceUrl: String!
  $locale: String!
  $latest: Boolean
) {
  dataCubeByIri(
    iri: $dataCubeIri
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    locale: $locale
    latest: $latest
  ) {
    dimensionByIri(
      iri: $dimensionIri
      sourceType: $sourceType
      sourceUrl: $sourceUrl
    ) {
      ... on GeoShapesDimension {
        geoShapes
      }
    }
  }
}

query DataCubeObservations(
  $iri: String!
  $sourceType: String!
  $sourceUrl: String!
  $locale: String!
  $componentIris: [String!]
  $filters: Filters
  $latest: Boolean
  $limit: Int
) {
  dataCubeByIri(
    iri: $iri
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    locale: $locale
    latest: $latest
  ) {
    observations(
      sourceType: $sourceType
      sourceUrl: $sourceUrl
      componentIris: $componentIris
      filters: $filters
      limit: $limit
    ) {
      data
      sparqlEditorUrl
    }
  }
}

query PossibleFilters(
  $iri: String!
  $sourceType: String!
  $sourceUrl: String!
  $filters: Filters!
) {
  possibleFilters(
    iri: $iri
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    filters: $filters
  ) {
    iri
    type
    value
  }
}

fragment hierarchyValueFields on HierarchyValue {
  value
  dimensionIri
  depth
  label
  alternateName
  hasValue
  position
  identifier
}

query DimensionHierarchy(
  $sourceType: String!
  $sourceUrl: String!
  $locale: String!
  $cubeIri: String!
  $dimensionIri: String!
) {
  dataCubeByIri(
    iri: $cubeIri
    sourceType: $sourceType
    sourceUrl: $sourceUrl
    locale: $locale
  ) {
    dimensionByIri(
      iri: $dimensionIri
      sourceType: $sourceType
      sourceUrl: $sourceUrl
    ) {
      ...hierarchyMetadata
    }
  }
}
