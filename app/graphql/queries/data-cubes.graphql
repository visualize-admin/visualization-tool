query DataCubes(
  $locale: String!
  $query: String
  $order: DataCubeResultOrder
  $includeDrafts: Boolean
  $filters: [DataCubeSearchFilter!]
) {
  dataCubes(
    locale: $locale
    query: $query
    order: $order
    includeDrafts: $includeDrafts
    filters: $filters
  ) {
    highlightedTitle
    highlightedDescription
    dataCube {
      iri
      title
      creator {
        iri
        label
      }
      description
      publicationStatus
      datePublished
      themes {
        iri
        label
      }
    }
  }
}

fragment dimensionFields on IDimension {
  iri
  label
  isKeyDimension

  ...categoricalFields
  ...temporalFields
  ...measureFields
}

fragment categoricalFields on ICategoricalDimension {
  iri
  label
  isKeyDimension
  hasOrder
  values {
    value
    label
    position
  }
}

fragment temporalFields on TemporalDimension {
  iri
  label
  isKeyDimension
  timeUnit
  timeFormat
  from
  to
}

fragment measureFields on Measure {
  iri
  label
  isKeyDimension
  unit
  min
  max
}

query DataCubePreview($iri: String!, $locale: String!, $latest: Boolean) {
  dataCubeByIri(iri: $iri, locale: $locale, latest: $latest) {
    iri
    title
    description
    publicationStatus
    dimensions {
      ...dimensionFields
    }
    measures {
      ...measureFields
    }
  }
}

query DataCubePreviewObservations(
  $iri: String!
  $locale: String!
  $measures: [String!]!
  $latest: Boolean
) {
  dataCubeByIri(iri: $iri, locale: $locale, latest: $latest) {
    observations(limit: 10, measures: $measures) {
      data
      sparql
    }
  }
}

query DataCubeMetadata($iri: String!, $locale: String!, $latest: Boolean) {
  dataCubeByIri(iri: $iri, locale: $locale, latest: $latest) {
    iri
    title
    description
    publisher
    version
    contactName
    contactEmail
    landingPage
    expires
    datePublished
    publicationStatus
    themes {
      iri
      label
    }
    creator {
      iri
      label
    }
  }
}

query DataCubeMetadataWithComponentValues(
  $iri: String!
  $locale: String!
  $latest: Boolean
) {
  dataCubeByIri(iri: $iri, locale: $locale, latest: $latest) {
    iri
    title
    publisher
    dimensions {
      ...dimensionFields
    }
    measures {
      ...dimensionFields
    }
  }
}

query DimensionValues(
  $dataCubeIri: String!
  $dimensionIri: String!
  $locale: String!
  $latest: Boolean
) {
  dataCubeByIri(iri: $dataCubeIri, locale: $locale, latest: $latest) {
    dimensionByIri(iri: $dimensionIri) {
      ...dimensionFields
    }
  }
}

query TemporalDimensionValues(
  $dataCubeIri: String!
  $dimensionIri: String!
  $locale: String!
  $latest: Boolean
) {
  dataCubeByIri(iri: $dataCubeIri, locale: $locale, latest: $latest) {
    dimensionByIri(iri: $dimensionIri) {
      ... on TemporalDimension {
        ...dimensionFields
        timeUnit
        timeFormat
      }
    }
  }
}

query DataCubeObservations(
  $iri: String!
  $locale: String!
  $measures: [String!]!
  $filters: Filters
  $latest: Boolean
) {
  dataCubeByIri(iri: $iri, locale: $locale, latest: $latest) {
    iri
    title
    description
    dimensions {
      ...dimensionFields
    }
    measures {
      ...dimensionFields
    }
    observations(measures: $measures, filters: $filters) {
      data
      sparqlEditorUrl
    }
  }
}

query Themes($locale: String!) {
  themes(locale: $locale) {
    iri
    label
  }
}

query Organizations($locale: String!) {
  organizations(locale: $locale) {
    iri
    label
  }
}

query Subthemes($locale: String!, $parentIri: String!) {
  subthemes(locale: $locale, parentIri: $parentIri) {
    label
    iri
  }
}

query DatasetCount($theme: String, $organization: String, $subtheme: String) {
  datasetcount(
    theme: $theme
    organization: $organization
    subtheme: $subtheme
  ) {
    count
    iri
  }
}
